package test;

import java.io.File;
import java.io.IOException;

import org.apache.commons.io.FileUtils;
import org.junit.Test;

import com.eazybuilder.sql.util.HttpUtil;

public class TestReportGenerate {

	@Test
	public void doReport() throws Exception {
//		String data="[{\"source\":\"\\\\src\\\\test\\\\resources\\\\TestMybatis3Mapper.xml\",\"sqlMap\":{\"testInsertMulti\":\"INSERT INTO        fruits        (        name,        category,        price        )        VALUES   \",\"testTrim\":\"SELECT        name,        category,        price        FROM        fruits   \",\"testBind\":\"SELECT        name,        category,        price        FROM        fruits        WHERE        name like #{likeName}   \",\"testParameters\":\"SELECT        name,        category,        price        FROM        fruits        WHERE        category = #{category}        AND price > ${price} \",\"testInclude\":\"SELECT        name,        category,        price   \",\"testSet\":\"UPDATE        fruits   \",\"testWhere\":\"SELECT        name,        category,        price        FROM        fruits   \",\"testIf\":\"SELECT        name,        category,        price        FROM        fruits        WHERE        1=1     \",\"testChoose\":\"SELECT        name,        category,        price        FROM        fruits   \",\"testForeach\":\"SELECT        name,        category,        price        FROM        fruits   \"},\"resultMap\":{\"testInsertMulti\":{\"success\":false,\"code\":\"42000\",\"msg\":\"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1|语法错误 '' at line 1\",\"validatorName\":\"mysql\"},\"testTrim\":{\"success\":true,\"code\":null,\"msg\":null,\"validatorName\":null},\"testBind\":{\"success\":false,\"code\":\"42000\",\"msg\":\"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1|语法错误 '' at line 1\",\"validatorName\":\"mysql\"},\"testParameters\":{\"success\":false,\"code\":\"42000\",\"msg\":\"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1|语法错误 '' at line 1\",\"validatorName\":\"mysql\"},\"testInclude\":{\"success\":false,\"code\":\"42S22\",\"msg\":\"Unknown column 'name' in 'field list'\",\"validatorName\":\"mysql\"},\"testSet\":{\"success\":false,\"code\":\"42000\",\"msg\":\"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1|语法错误 '' at line 1\",\"validatorName\":\"mysql\"},\"testWhere\":{\"success\":true,\"code\":null,\"msg\":null,\"validatorName\":null},\"testIf\":{\"success\":true,\"code\":null,\"msg\":null,\"validatorName\":null},\"testChoose\":{\"success\":true,\"code\":null,\"msg\":null,\"validatorName\":null},\"testForeach\":{\"success\":true,\"code\":null,\"msg\":null,\"validatorName\":null}}},{\"source\":\"\\\\target\\\\test-classes\\\\TestMybatis3Mapper.xml\",\"sqlMap\":{\"testInsertMulti\":\"INSERT INTO        fruits        (        name,        category,        price        )        VALUES   \",\"testTrim\":\"SELECT        name,        category,        price        FROM        fruits   \",\"testBind\":\"SELECT        name,        category,        price        FROM        fruits        WHERE        name like #{likeName}   \",\"testParameters\":\"SELECT        name,        category,        price        FROM        fruits        WHERE        category = #{category}        AND price > ${price} \",\"testInclude\":\"SELECT        name,        category,        price   \",\"testSet\":\"UPDATE        fruits   \",\"testWhere\":\"SELECT        name,        category,        price        FROM        fruits   \",\"testIf\":\"SELECT        name,        category,        price        FROM        fruits        WHERE        1=1     \",\"testChoose\":\"SELECT        name,        category,        price        FROM        fruits   \",\"testForeach\":\"SELECT        name,        category,        price        FROM        fruits   \"},\"resultMap\":{\"testInsertMulti\":{\"success\":false,\"code\":\"42000\",\"msg\":\"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1|语法错误 '' at line 1\",\"validatorName\":\"mysql\"},\"testTrim\":{\"success\":true,\"code\":null,\"msg\":null,\"validatorName\":null},\"testBind\":{\"success\":false,\"code\":\"42000\",\"msg\":\"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1|语法错误 '' at line 1\",\"validatorName\":\"mysql\"},\"testParameters\":{\"success\":false,\"code\":\"42000\",\"msg\":\"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1|语法错误 '' at line 1\",\"validatorName\":\"mysql\"},\"testInclude\":{\"success\":false,\"code\":\"42S22\",\"msg\":\"Unknown column 'name' in 'field list'\",\"validatorName\":\"mysql\"},\"testSet\":{\"success\":false,\"code\":\"42000\",\"msg\":\"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1|语法错误 '' at line 1\",\"validatorName\":\"mysql\"},\"testWhere\":{\"success\":true,\"code\":null,\"msg\":null,\"validatorName\":null},\"testIf\":{\"success\":true,\"code\":null,\"msg\":null,\"validatorName\":null},\"testChoose\":{\"success\":true,\"code\":null,\"msg\":null,\"validatorName\":null},\"testForeach\":{\"success\":true,\"code\":null,\"msg\":null,\"validatorName\":null}}}]\n" ;
//		String data="[]";
		String data=FileUtils.readFileToString(new File("target/sql-scan/scan-result.json"), "utf-8");
		try {
			HttpUtil.postJson("http://localhost:8081/sql-validate/report/html?projectName=test", data);
		} catch (Exception e) {
			e.printStackTrace();
		}
        
	}
}
